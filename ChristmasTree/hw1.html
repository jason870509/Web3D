<!DOCTYPE html>
<html>

<body>
  <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  <div>
    <button id="toggle" style='position:absolute;left:10vw;top:5vw;width:10vw;height:3vw'>Turn Light OFF</button>
    <button id="mode1" style='position:absolute;left:10vw;top:9vw;width:10vw;height:3vw'>Easy Mode</button>
    <!--
  <div id="light" style="position:absolute;top:10vw;left:30vw;  
background:pink;width:20px;height:20px;  
border-radius:15px;z-index:1"></div>
-->
    <!--BAACKGROUND-->
    <img src="picture/background2.jpg" style="position:absolute; width:100vw;height:80vw;z-index:-1">
    <!--TREE-->
    <img src="picture/tree1.png" style="position:absolute;top:5vw;left:22vw;width:40vw;z-index:-1">
    <!--STAR-->
    <img src="picture/star.png" style="position:absolute; top:2vw;left:40vw;width:7vw;height:7vw;z-index:-1">

    <!--SOCK-->
    <img src="picture/sock.png" style="position:absolute; top:55vw;left:45vw;width:5vw;height:7vw;z-index:-1">


    <!--GIFT-->
    <img src="picture/gift.png" style="position:absolute; top:60vw;left:25vw;width:15vw;height:15vw;z-index:-1">
    <img src="picture/gift2.png" style="position:absolute; top:60vw;left:38vw;width:25vw;height:15vw;z-index:-1">

    <!--RING-->
    <img src="picture/ring.png" style="position:absolute; top:55vw;left:25vw;width:5vw;height:5vw;z-index:-1">
    <img src="picture/ring.png" style="position:absolute; top:30vw;left:38vw;width:5vw;height:5vw;z-index:-1">

    <!--CANDY-->
    <img src="picture/candy.png" style="position:absolute; top:45vw;left:33vw;width:5vw;height:5vw;z-index:-1">
    <img src="picture/candy.png" style="position:absolute; top:38vw;left:45vw;width:5vw;height:5vw;z-index:-1">
    <img src="picture/candy.png" style="position:absolute; top:23vw;left:37vw;width:5vw;height:5vw;z-index:-1">
    <img src="picture/candy.png" style="position:absolute; top:16vw;left:43vw;width:5vw;height:5vw;z-index:-1">
    <img src="picture/candy.png" style="position:absolute; top:50vw;left:47vw;width:5vw;height:5vw;z-index:-1">
  </div>



  <script>
    var change = false;
    var mode = true;

    $('#toggle').click(function () {
      change = !change;
      if (change === true) {
        $('#toggle').text('Turn Light ON');
      } else {
        $('#toggle').text('Turn Light OFF');
      }
    });
    $('#mode1').click(function () {
      mode = !mode;
      if (mode === true) {
        $('#mode1').text('Easy Mode');
      } else {
        $('#mode1').text('Hard Mode');
      }
    });
    class Light {
      constructor() {
        // create/append div dynamically
        // https://stackoverflow.com/questions/14004117/create-div-and-append-div-dynamically
        this.element = document.createElement('div');
        //this = iDiv;
        this.element.id = 'light';
        this.speed = 1000;
        this.hue = 100;
        // set element style attribute
        //https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/style
        this.element.style.cssText = "position:absolute;width:40px;height:40px;border-radius:30px;z-index:1";
        this.element.style.top = '10vw';
        this.element.style.left = '40vw';
        // CSS color property: https://www.w3schools.com/cssref/pr_text_color.asp
        // hsl: https://www.w3schools.com/colors/colors_hsl.asp
        this.element.style.background = "hsl(100, 43%, 51%)";
        document.getElementsByTagName('body')[0].appendChild(this.element);
      }

      changeColor(hue, s, speed) {
        // https://stackoverflow.com/questions/45147661/javascript-recursion-within-a-class/45147713
        this.hue = hue;
        this.speed = speed;
        var self = this;
        if (s == 0) s = 43;
        else s -= 5;
        if (s < 0) s = 0;
        if (change) {
          self.element.style.background = "hsl( " + hue + " , " + '0' + "%, 51%)";
          s = 43;
        }

        else
          self.element.style.background = "hsl( " + hue + " , " + s + "%, 51%)";
        //if(s == 43) setTimeout (function() { self.changeColor(hue, s, speed) } , speed);
        // else setTimeout (function() { self.changeColor(hue, s, speed) } , 50);
        if (mode)
          setTimeout(function () { self.changeColor(hue, s, speed) }, 100);
        else {
          speed = Math.random() * 200;
          setTimeout(function () { self.changeColor(hue, s, speed) }, speed);
        }


        // setTimeout ( self.changeColor , 1000);  // why this is not working ...
      }

    }

    ////////////////////////////////
    init();

    function init() {
      var light = [];
      for (i = 0; i < 13; i++) {
        light[i] = new Light();
      }
      var s = 43;
      light[0].changeColor(250, s, 1000);

      light[1].element.style.top = '20vw';
      light[1].element.style.left = '40vw';
      light[1].changeColor(40, s, 500);

      light[2].element.style.top = '50vw';
      light[2].element.style.left = '30vw';
      light[2].changeColor(0, s, 1100);

      light[3].element.style.top = '40vw';
      light[3].element.style.left = '40vw';
      light[3].changeColor(40, s, 1200);

      light[4].element.style.top = '30vw';
      light[4].element.style.left = '45vw';
      light[4].changeColor(310, s, 900);

      light[5].element.style.top = '50vw';
      light[5].element.style.left = '40vw';
      light[5].changeColor(180, s, 600);

      light[6].element.style.top = '55vw';
      light[6].element.style.left = '55vw';
      light[6].changeColor(56, s, 400);

      light[7].element.style.top = '45vw';
      light[7].element.style.left = '50vw';
      light[7].changeColor(220, s, 300);

      light[8].element.style.top = '50vw';
      light[8].element.style.left = '30vw';
      light[8].changeColor(270, s, 200);

      light[9].element.style.top = '40vw';
      light[9].element.style.left = '35vw';
      light[9].changeColor(80, s, 100);

      light[10].element.style.top = '35vw';
      light[10].element.style.left = '50vw';
      light[10].changeColor(80, s, 100);

      light[11].element.style.top = '30vw';
      light[11].element.style.left = '35vw';
      light[11].changeColor(340, s, 1300);

      light[12].element.style.top = '23vw';
      light[12].element.style.left = '45vw';
      light[12].changeColor(335, s, 1400);

    }
  </script>
</body>

</html>